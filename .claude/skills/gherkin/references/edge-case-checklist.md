# 예외 케이스 체크리스트

## 목적
Phase B에서 사용자가 최소 5개 이상의 예외 케이스를 식별하여 엣지 케이스 탐지 능력을 훈련한다.

---

## 파일 생성 워크시트 (Phase B)

이 워크시트는 `.atdd/scenarios/draft-edge-cases.md` 파일로 생성된다.

```markdown
# Edge Case Hunt 워크시트

> 작성 가이드: 최소 5개의 예외 케이스를 식별하세요. 완료 후 "완료" 또는 "다음"을 입력하세요.

## 기능: [Feature명]

---

## 식별된 예외 케이스

### 1. 입력 검증 실패
- [ ] 케이스 1: _______________
- [ ] 케이스 2: _______________

### 2. 비즈니스 규칙 위반
- [ ] 케이스 1: _______________
- [ ] 케이스 2: _______________

### 3. 외부 의존성 실패
- [ ] 케이스 1: _______________

### 4. 동시성 문제
- [ ] 케이스 1: _______________

### 5. 경계값
- [ ] 케이스 1: _______________

---

## 총 식별 개수: ___개 (최소 5개 필요)

---

## 참고: 예외 케이스 카테고리
| 카테고리 | 예시 |
|----------|------|
| 입력 검증 실패 | 필수값 누락, 잘못된 형식, 길이 제한 초과 |
| 비즈니스 규칙 위반 | 중복 데이터, 상태 위반, 권한 부족 |
| 외부 의존성 실패 | API 타임아웃, DB 연결 실패 |
| 동시성 문제 | 동시 수정, 레이스 컨디션 |
| 경계값 | 최소/최대값, 빈 컬렉션, null |
```

---

## 예외 케이스 카테고리

### 1. 입력 검증 실패

| 케이스 | 예시 |
|--------|------|
| 필수값 누락 | 이메일 없이 회원가입 |
| 잘못된 형식 | 이메일 형식 위반 |
| 길이 제한 초과 | 비밀번호 100자 |
| 범위 초과 | 나이 -1, 나이 1000 |
| 타입 불일치 | 숫자 필드에 문자 |
| 특수문자 처리 | 이모지, SQL 인젝션 |

### 2. 비즈니스 규칙 위반

| 케이스 | 예시 |
|--------|------|
| 중복 데이터 | 이미 존재하는 이메일 |
| 상태 위반 | 이미 취소된 주문 취소 |
| 권한 부족 | 일반 사용자의 관리자 기능 |
| 순서 위반 | 결제 전 배송 요청 |
| 수량 제한 | 재고 초과 주문 |

### 3. 외부 의존성 실패

| 케이스 | 예시 |
|--------|------|
| 외부 API 타임아웃 | 결제 게이트웨이 응답 없음 |
| 외부 API 에러 | 500 Internal Server Error |
| DB 연결 실패 | 커넥션 풀 고갈 |
| 캐시 서버 다운 | Redis 연결 실패 |
| 파일 시스템 에러 | 디스크 공간 부족 |

### 4. 동시성 문제

| 케이스 | 예시 |
|--------|------|
| 동시 수정 | 같은 상품 동시 주문 |
| 레이스 컨디션 | 잔액 확인 후 출금 사이 변경 |
| 데드락 | 교차 락 획득 |
| 유실 업데이트 | 마지막 쓰기 승리 |

### 5. 경계값

| 케이스 | 예시 |
|--------|------|
| 최소값 | 금액 0원 |
| 최대값 | 금액 1억 |
| 빈 컬렉션 | 장바구니 비어있음 |
| 첫 번째/마지막 | 목록의 첫 페이지, 마지막 페이지 |
| null/undefined | 선택적 필드 누락 |

---

## Edge Case Hunt 워크시트

```markdown
# Edge Case Hunt

## 식별된 예외 케이스

### 1. [입력 검증]
- [ ] 케이스명: _______________
- [ ] 케이스명: _______________

### 2. [비즈니스 규칙]
- [ ] 케이스명: _______________
- [ ] 케이스명: _______________

### 3. [외부 의존성]
- [ ] 케이스명: _______________
- [ ] 케이스명: _______________

### 4. [동시성]
- [ ] 케이스명: _______________

### 5. [경계값]
- [ ] 케이스명: _______________

## 총 식별 개수: ___개
최소 5개 이상 필요
```

---

## 예시: 회원가입 Edge Cases

```markdown
# 회원가입 Edge Cases

## 1. 입력 검증 실패
- [x] 이메일 누락
- [x] 이메일 형식 오류 (invalid-email)
- [x] 비밀번호 8자 미만
- [x] 비밀번호 특수문자 없음
- [x] 이름에 이모지 포함

## 2. 비즈니스 규칙 위반
- [x] 이미 존재하는 이메일
- [x] 탈퇴한 회원의 이메일 재가입

## 3. 외부 의존성 실패
- [x] 이메일 발송 서비스 타임아웃
- [x] DB 커넥션 실패

## 4. 동시성 문제
- [x] 동일 이메일 동시 가입 시도

## 5. 경계값
- [x] 이메일 최대 길이 (255자)
- [x] 비밀번호 최대 길이 (100자)
- [x] 이름 최소 길이 (1자)

## 총 식별 개수: 12개 ✅
```

---

## Edge Case 발견 기법

### 1. "무엇이 잘못될 수 있는가?" 질문
```
- 사용자가 실수로?
- 악의적 사용자가?
- 시스템이 실패하면?
- 동시에 여러 요청이 오면?
```

### 2. 상태 전이 분석
```
- 각 상태에서 불가능한 전이는?
- 이미 완료된 작업을 다시 시도하면?
```

### 3. 입력 분해
```
- 각 필드별로 따로 실패 케이스 생각
- 필드 조합 실패 케이스 생각
```

---

## STOP Protocol (Phase B 완료)

```
---
📁 파일 생성 완료: .atdd/scenarios/draft-edge-cases.md
👆 파일을 열어 최소 5개의 예외 케이스를 식별해주세요.
식별 완료 후 "완료" 또는 "다음"이라고 입력해주세요.
Phase C (Generation)로 진행합니다.
```
